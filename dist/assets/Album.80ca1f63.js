import{d as e,z as a,r as t,o as l,q as r,g as u,h as n,D as s}from"./vendor.d256638c.js";import{q as o}from"./index.f8e01513.js";import{_ as i}from"./AlbumCoverList.2a0b39cc.js";import{_ as g}from"./Pagination.978ba472.js";var v=e({setup(e){var v,c;const P=a().currentRoute.value.query,d=null==(v=P.id)?void 0:v.toString();null==(c=P.total)||c.toString();const m=t({list:[],currentPage:1,totalPage:0,endPage:0}),p=async()=>{if(!d)return;let e=await o(d,m.value.currentPage);m.value.list=e.hotAlbums,m.value.totalPage=e.artist.mvSize,m.value.endPage=Math.ceil(e.artist.albumSize/12)};l((()=>{p()}));const f=(e,a)=>{const t=m.value.currentPage;({page:()=>"page"===e&&a?m.value.currentPage=a:null,prev:()=>m.value.currentPage=1===t||2===t?1:t-1,next:()=>m.value.currentPage=t===m.value.totalPage||t+1===m.value.totalPage?m.value.totalPage:t+1})[e]()};return r((()=>m.value.currentPage),(()=>{console.log(m.value.currentPage),m.value.list=[],p()}),{deep:!0}),console.log(m.value),(e,a)=>(u(),n("div",null,[s(i,{list:m.value.list,size:120,lineSize:4},null,8,["list"]),s(g,{endPage:m.value.endPage,currentPage:m.value.currentPage,click:f},null,8,["endPage","currentPage"])]))}});export{v as default};
