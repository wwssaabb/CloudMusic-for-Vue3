import{d as a,V as e,f as t,w as l,g as s,h as n,i,t as o,u as r,p as d,b as c,x as u,F as v,A as m,j as p,z as _,U as g,r as C,o as f,q as b,s as y,D as h}from"./vendor.d256638c.js";import{z as P,A as k,B as j,C as U,D as w}from"./index.81ad652e.js";import{_ as I}from"./Combination.060b932a.js";import{p as D,l as q,g as x}from"./index.45387715.js";import{_ as A}from"./AppDownload.916a7fbf.js";import"./CommentHead.9aef55ce.js";import"./moment.423e2916.js";import"./Pagination.978ba472.js";d("data-v-24eaf01e");const M={class:"mv-play"},T={class:"title"},H=i("i",{class:"icon_mv_tag"},null,-1),z=["src","poster"],F={class:"icons fsc"},L={class:"like icon_mv_icon_like pr"},N=i("i",{class:"close d_ib pa icons20_img"},null,-1),O=i("i",{class:"like_icon d_ib pa"},null,-1),S={class:"d_ib cur_p"},V={class:"collect icon_mv_icon_collect pr"},B=i("i",{class:"close d_ib pa icons20_img"},null,-1),R={class:"d_ib cur_p"},E={class:"share icon_mv_icon_share pr"},G=i("i",{class:"close d_ib pa icons20_img"},null,-1),J={class:"d_ib cur_p"};c();var K=a({props:{detail:{type:Object,required:!0},mvUrl:{type:String,required:!0}},setup(a){var d;const c=null==(d=e("router"))?void 0:d.push;return(e,d)=>{var u;const v=t("loading");return l((s(),n("div",M,[i("div",T,[H,i("span",null,o(a.detail.name),1),i("span",{class:"td_u",onClick:d[0]||(d[0]=e=>{var t;return null==(t=r(c))?void 0:t("/artist?id="+a.detail.artistId)})},o(a.detail.artistName),1)]),i("video",{src:a.mvUrl,poster:a.detail.cover,controls:""},null,8,z),i("div",F,[i("div",L,[N,O,i("span",S,"("+o(null!=(u=a.detail.likedCount)?u:0)+")",1)]),i("div",V,[B,i("span",R,"("+o(a.detail.subCount)+")",1)]),i("div",E,[G,i("span",J,"("+o(a.detail.shareCount)+")",1)])])],512)),[[v,""===a.detail.cover]])}}});K.__scopeId="data-v-24eaf01e",d("data-v-355003ed");const Q={class:"mv-introduction"},W=i("div",{class:"title"},"MV简介",-1),X={key:0,class:"msg fd_col"},Y={key:1,class:"content"};c();var Z=a({props:{detail:{type:Object,required:!0}},setup:a=>(e,t)=>{return s(),n("div",Q,[W,a.detail?(s(),n("div",X,[i("span",null,"发布时间："+o(a.detail.publishTime),1),i("span",null,"播放次数："+o((l=a.detail.playCount,l>=1e4?(l/1e4).toFixed(0)+"万次":l+"次")),1)])):u("",!0),a.detail?(s(),n("div",Y,o(a.detail.desc),1)):u("",!0)]);var l}});Z.__scopeId="data-v-355003ed",d("data-v-2b5beac4");const $={key:0,class:"recommend-mvs"},aa=i("div",{class:"title"},"相关推荐",-1),ea={class:"list"},ta={class:"cover pr f_nos"},la=["src"],sa={class:"playCount pa d_ib"},na={class:"fsc"},ia=i("i",{class:"icon_mv_camera"},null,-1),oa={class:"msg fd_col t_ovl1 f_nog"},ra={class:"name d_ib t_ovl1 td_u"},da={class:"duration d_ib t_ovl1"},ca={class:"artist d_ib t_ovl1"},ua=p("by "),va=["innerHTML"];c();var ma=a({props:{list:{type:Array,required:!0}},setup:a=>(e,t)=>0!==a.list.length?(s(),n("div",$,[aa,i("div",ea,[(s(!0),n(v,null,m(a.list,(a=>(s(),n("div",{class:"item fss",key:a.vid},[i("div",ta,[i("img",{src:a.coverUrl+"?param=96y54",alt:""},null,8,la),i("div",sa,[i("span",na,[i("span",null,o(r(D)(a.playTime)),1),ia])])]),i("div",oa,[i("span",ra,o(a.title),1),i("span",da,o(r(q)(a.durationms)),1),i("span",ca,[ua,i("span",{class:"td_u",innerHTML:r(x)(a.creator,"userName","userId","/user/home?id=")},null,8,va)])])])))),128))])])):u("",!0)});ma.__scopeId="data-v-2b5beac4",d("data-v-61ea79f2");const pa={class:"mv-page fss"},_a={class:"left"},ga={class:"right"};c();var Ca=a({setup(a){var e;const t=_(),l=null==(e=t.currentRoute.value.query.id)?void 0:e.toString();g("router",t);const o=C({detail:null,detailInfo:null,recommends:[],mvUrlData:null,hotComments:[],comments:[],currentPage:1,endPage:1,commentContent:""}),r=(a,e=20)=>Math.ceil(a/e),d=(a,e)=>{const t=o.value.currentPage,l=o.value.endPage;({page:()=>"page"===a&&e?o.value.currentPage=e:null,prev:()=>o.value.currentPage=1===t||2===t?1:t-1,next:()=>o.value.currentPage=t===l||t+1===l?l:t+1})[a]()},c=async()=>{if(!l)return;o.value.comments=[];let a=await j(l,o.value.currentPage);o.value.hotComments=a.hotComments,o.value.comments=a.comments};return f((()=>{let a;(async()=>{if(!l)return;let a=await k(l);return o.value.detailInfo=a,o.value.detail?void 0:Promise.resolve((function(){o.value.detail&&(o.value.detail.shareCount=a.shareCount,o.value.detail.commentCount=a.commentCount,o.value.detail.likedCount=a.likedCount,o.value.detail.liked=a.liked,o.value.endPage=r(a.commentCount))}))})().then((e=>a=e)),(async()=>{l&&(o.value.detail=(await P(l)).data,o.value.detail.likedCount=0,o.value.endPage=r(o.value.detail.commentCount))})().then((()=>null==a?void 0:a())),c(),(async()=>{l&&(o.value.mvUrlData=(await U(l)).data)})(),(async()=>{l&&(o.value.recommends=(await w(l)).data)})()})),b((()=>o.value.currentPage),(()=>c())),(a,e)=>(s(),n("div",pa,[i("div",_a,[o.value.detail&&o.value.mvUrlData?(s(),y(K,{key:0,detail:o.value.detail,mvUrl:o.value.mvUrlData.url},null,8,["detail","mvUrl"])):u("",!0),o.value.detail?(s(),y(I,{key:1,commentCount:o.value.detail.commentCount,commentContent:o.value.commentContent,hotComments:o.value.hotComments,comments:o.value.comments,endPage:o.value.endPage,currentPage:o.value.currentPage,changePage:d},null,8,["commentCount","commentContent","hotComments","comments","endPage","currentPage"])):u("",!0)]),i("div",ga,[o.value.detail?(s(),y(Z,{key:0,detail:o.value.detail},null,8,["detail"])):u("",!0),h(ma,{list:o.value.recommends},null,8,["list"]),h(A,{showCode:!0})])]))}});Ca.__scopeId="data-v-61ea79f2";export{Ca as default};
