import{d as a,g as t,h as e,i as l,t as s,B as n,z as i,r as c,o as r,u as o,j as u,x as d,D as p,F as m,A as v,p as g,b as _,s as y,U as f,q as b,f as k,w as h,v as C}from"./vendor.d256638c.js";import{E as x,u as P,F as j,G as I}from"./index.81ad652e.js";import{t as q}from"./index.45387715.js";import{P as w}from"./play_addlist.0c211fb8.js";import{_ as S}from"./SongList.9e1a3a65.js";import{_ as B}from"./AppDownload.916a7fbf.js";import{_ as T}from"./Combination.060b932a.js";import{_ as U}from"./Title.df053e60.js";import"./moment.423e2916.js";import"./CommentHead.9aef55ce.js";import"./Pagination.978ba472.js";const A=l("i",{class:"icon_close pa"},null,-1);var D=a({props:{text:{type:String,required:!0},iconBg:{type:String,required:!0}},setup:a=>(i,c)=>(t(),e("div",{class:n(["pr",a.iconBg])},[l("span",null,s(a.text),1),A],2))});g("data-v-54e94b46");const L={class:"playlist-head fss"},F={class:"left icon_playlist_cover_bg f_nos"},R=["src"],H={class:"right"},N={class:"name fss"},z=l("i",{class:"icon_playlist_tag f_nosg"},null,-1),E={class:"creator fsc"},G=["src"],M=["src"],O={class:"create_time"},J={class:"feature fss"},K={class:"tags"},Q=l("span",null,"标签：",-1),V=l("span",null,"介绍：",-1);_();var W=a({props:{detail:{type:Object,required:!0}},setup(a){const g=i(),_=c(!1),f=c(!1),b=c();return r((()=>{if(!b.value)return;let a=b.value.clientHeight;f.value=a>=162})),(i,c)=>(t(),e("div",L,[l("div",F,[l("img",{src:a.detail.coverImgUrl+"?param=200y200",alt:""},null,8,R)]),l("div",H,[l("div",N,[z,l("span",null,s(a.detail.name),1)]),l("div",E,[l("img",{src:a.detail.creator.avatarUrl,alt:""},null,8,G),l("span",{class:"creator_name td_u",onClick:c[0]||(c[0]=t=>o(g).push("/user/home?id="+a.detail.creator.userId))},[u(s(a.detail.creator.nickname)+" ",1),a.detail.creator.avatarDetail?(t(),e("img",{key:0,src:a.detail.creator.avatarDetail.identityIconUrl+"?param=40y40",alt:""},null,8,M)):d("",!0)]),l("span",O,s(o(q)(a.detail.createTime))+" 创建",1)]),l("div",J,[p(w),p(D,{iconBg:"icon_playlist_collect",text:"("+a.detail.subscribedCount+")"},null,8,["text"]),p(D,{iconBg:"icon_playlist_share",text:"("+a.detail.shareCount+")"},null,8,["text"]),p(D,{iconBg:"icon_playlist_download",text:"下载"}),p(D,{iconBg:"icon_playlist_comment",text:"("+a.detail.commentCount+")"},null,8,["text"])]),l("div",K,[Q,(t(!0),e(m,null,v(a.detail.tags,(a=>(t(),y(D,{iconBg:"icon_playlist_t_tag user_ns",text:a},null,8,["text"])))),256))]),l("div",{class:n(["intro pr",_.value?"show":""]),ref:(a,t)=>{t.intro=a,b.value=a}},[V,l("span",null,s(a.detail.description),1),f.value?(t(),e("span",{key:0,class:"btn_expand pa td_u",style:{color:"#0c73c2"},onClick:c[1]||(c[1]=a=>_.value=!_.value)},[u(s(_.value?"收起":"展开"),1),l("i",{class:n(["icon_expand_arrow",_.value?"rot":""])},null,2)])):d("",!0)],2)])]))}});W.__scopeId="data-v-54e94b46",g("data-v-4f72e1de");const X={class:"playlist-likers"},Y=l("div",{class:"title"},"喜欢这个歌单的人",-1),Z={class:"list"},$=["src","onClick"];_();var aa=a({props:{list:{type:Array,required:!0}},setup(a){const s=i();return(n,i)=>(t(),e("div",X,[Y,l("div",Z,[(t(!0),e(m,null,v(a.list,(a=>(t(),e("img",{class:"item",src:a.avatarUrl+"?param=40y40",alt:"",onClick:t=>o(s).push("/user/home?id="+a.userId)},null,8,$)))),256))])]))}});aa.__scopeId="data-v-4f72e1de",g("data-v-66079714");const ta={class:"playlist-ralated"},ea=l("div",{class:"title"},"热门歌单",-1),la={class:"list"},sa={class:"item fsc"},na=["src","onClick"],ia={class:"right fd_col t_ovl1"},ca=["onClick"],ra={class:"creator d_ib"},oa=u("by "),ua=["onClick"];_();var da=a({props:{list:{type:Array,required:!0}},setup(a){const n=i();return(i,c)=>(t(),e("div",ta,[ea,l("div",la,[(t(!0),e(m,null,v(a.list,(a=>(t(),e("div",sa,[l("img",{src:a.coverImgUrl+"?param=50y50",alt:"",onClick:t=>o(n).push("playlist?id="+a.id)},null,8,na),l("div",ia,[l("span",{class:"name d_ib t_ovl1 td_u",onClick:t=>o(n).push("playlist?id="+a.id)},s(a.name),9,ca),l("span",ra,[oa,l("span",{class:"nick-name td_u",onClick:t=>o(n).push("/user/home?id="+a.creator.userId)},s(a.creator.nickname),9,ua)])])])))),256))])]))}});da.__scopeId="data-v-66079714",g("data-v-52f8360f");const pa={class:"playlist-hint fdc fpbc"},ma={class:"content"};_();var va=a({props:{content:{type:String,required:!0},btnText:{type:String,required:!0},btnCallback:{type:Function,required:!0}},setup:a=>(n,i)=>(t(),e("div",pa,[l("div",ma,s(a.content),1),l("div",{class:"todo_btn cur_p",onClick:i[0]||(i[0]=t=>a.btnCallback())},s(a.btnText),1)]))});va.__scopeId="data-v-52f8360f",g("data-v-28eb9739");const ga={class:"playlist-page fss"},_a={class:"left f_nosg"},ya={class:"head-wrap"},fa=l("span",{class:"sont-list-title"},"歌曲列表",-1),ba={class:"sont-list-trackcount"},ka=l("span",{class:"sont-list-outline td_u pr"},[l("i",{class:"icon_music pa"}),u("生成外链播放器")],-1),ha={class:"sont-list-playcount"},Ca=u("播放："),xa={class:"playcount"},Pa=u("次"),ja=l("span",null,"专辑",-1),Ia={class:"album_name td_u"},qa={class:"right f_nosg"};_();var wa=a({setup(a){var n;const o=i();f("push",o.push);const u=null==(n=o.currentRoute.value.query.id)?void 0:n.toString(),m=c({detail:null,relatedList:[],hotComments:[],comments:[],currentPage:1,endPage:0,comment:"",tracks:[]}),v=(a,t)=>{const e=m.value.currentPage,l=m.value.endPage;({page:()=>"page"===a&&t?m.value.currentPage=t:null,prev:()=>m.value.currentPage=1===e||2===e?1:e-1,next:()=>m.value.currentPage=e===l||e+1===l?l:e+1})[a]()},g=async()=>{if(!u)return;m.value.comments=[];let a=await I(u,m.value.currentPage);m.value.hotComments=a.hotComments,m.value.comments=a.comments,m.value.endPage=Math.ceil(a.total/20)};return r((()=>{(async()=>{u&&(m.value.detail=(await x(u)).playlist)})().then((a=>(async()=>{if(!m.value.detail)return;const a=m.value.detail.trackIds.slice(0,20).map((a=>a.id)).join(",");m.value.tracks=(await P(a)).songs})())),(async()=>{u&&(m.value.relatedList=(await j(u)).playlists)})(),g()})),b((()=>m.value.currentPage),g),console.log(m.value),(a,n)=>{const i=k("loading");return t(),e("div",ga,[l("div",_a,[h(l("div",ya,[m.value.detail?(t(),y(W,{key:0,detail:m.value.detail},null,8,["detail"])):d("",!0)],512),[[i,null===m.value.detail]]),m.value.detail?(t(),y(U,{key:0},{title:C((()=>[fa,l("span",ba,s(m.value.detail.trackCount)+"首歌",1)])),right:C((()=>[ka,l("span",ha,[Ca,l("span",xa,s(m.value.detail.playCount),1),Pa])])),_:1})):d("",!0),m.value.detail?(t(),y(S,{key:1,list:m.value.tracks,specialTop:0,getStatus:()=>"",getRankNumber:()=>{},otherSlot:!0},{title:C((()=>[ja])),other:C((({item:a})=>[l("span",Ia,s(a.al.name),1)])),_:1},8,["list","getStatus","getRankNumber"])):d("",!0),0!==m.value.tracks.length?(t(),y(va,{key:2,content:"查看更多内容，请下载客户端",btnText:"立即下载",btnCallback:()=>{}},null,8,["btnCallback"])):d("",!0),m.value.detail?(t(),y(T,{key:3,commentContent:m.value.comment,commentCount:m.value.detail.commentCount,hotComments:m.value.hotComments,comments:m.value.comments,endPage:m.value.endPage,currentPage:m.value.currentPage,changePage:v},null,8,["commentContent","commentCount","hotComments","comments","endPage","currentPage"])):d("",!0)]),l("div",qa,[m.value.detail?(t(),y(aa,{key:0,list:m.value.detail.subscribers},null,8,["list"])):d("",!0),p(da,{list:m.value.relatedList},null,8,["list"]),p(B)])])}}});wa.__scopeId="data-v-28eb9739";export{wa as default};
