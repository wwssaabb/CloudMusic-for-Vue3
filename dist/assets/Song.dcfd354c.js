import{u as a,v as s,w as t,x as l,y as e}from"./index.81ad652e.js";import{d as n,r as i,f as c,g as o,h as d,w as r,i as u,x as v,t as m,D as p,n as g,j as _,B as y,p as b,G as f,b as h,F as P,A as C,z as w,u as k,o as x,q as I,s as j}from"./vendor.d256638c.js";import{P as S}from"./play_addlist.0c211fb8.js";import{_ as E,a as q}from"./CommentHead.9aef55ce.js";import{_ as z}from"./Pagination.978ba472.js";import{_ as A}from"./AppDownload.916a7fbf.js";import"./moment.423e2916.js";b("data-v-5b44103e");const H={class:"song-detail fss"},M={class:"left"},T={key:0,class:"cover pr"},$=["src"],B=u("i",{class:"disk icon_cover_disk pa"},null,-1),D=u("div",{class:"out-path fcc"},[u("i",{class:"icon_music"}),u("span",null,"生成外链播放器")],-1),L={class:"right"},R={class:"song-name fsc"},U=u("i",{class:"icon_single_song"},null,-1),F={key:0,class:"icon_mv"},G={class:"desc"},N={class:"artist"},O=_(" 歌手: "),J={class:"td_u"},K={class:"album"},Q=_(" 所属专辑: "),V={class:"td_u"},W={class:"features fsc"},X=f('<div class="collect pr cur_p" data-v-5b44103e><i class="icon_btn_collect_bg" data-v-5b44103e><span class="text pa" data-v-5b44103e>收藏</span></i></div><div class="share pr cur_p" data-v-5b44103e><i class="icon_btn_share_bg" data-v-5b44103e><span class="text pa" data-v-5b44103e>分享</span></i></div><div class="download pr cur_p" data-v-5b44103e><i class="icon_btn_download_bg" data-v-5b44103e><span class="text pa" data-v-5b44103e>下载</span></i></div>',3),Y={class:"comment cur_p"},Z={class:"icon_btn_comment_bg"},aa={class:"text"},sa=_("("),ta=_(")"),la={class:"lyric pr"},ea=u("div",{class:"sub-lyric-err"},[u("span",{class:"cur_p"},"报错")],-1);h();var na=n({props:{data:{type:Object,default:void 0},lyric:{type:String,default:""},commentCount:{type:Number,default:0}},setup(a){const s=a;console.log(s.lyric);const t=i(!1);return(s,l)=>{var e,n,i,b;const f=c("loading");return o(),d("div",H,[r(u("div",M,[a.data?(o(),d("div",T,[u("img",{src:a.data.al.picUrl+"?param=130y130",alt:""},null,8,$),B])):v("",!0),D],512),[[f,void 0===a.data]]),r(u("div",L,[u("div",R,[U,u("span",null,m(null==(e=a.data)?void 0:e.name),1),(null==(n=a.data)?void 0:n.mv)?(o(),d("i",F)):v("",!0)]),u("div",G,[u("div",N,[O,u("span",J,m(null==(i=a.data)?void 0:i.ar[0].name),1)]),u("div",K,[Q,u("span",V,m(null==(b=a.data)?void 0:b.al.name),1)])]),u("div",W,[p(S),X,u("div",Y,[u("i",Z,[u("span",aa,[sa,u("span",null,m(a.commentCount),1),ta])])])]),u("div",la,[u("div",{class:"lyric-content",style:g({height:t.value?"auto":"322px"})},m(a.lyric.replace(/((\[[\d\:\.]+\])+)/g,"")),5),u("div",{class:"expand-btn pa td_u",onClick:l[0]||(l[0]=a=>t.value=!t.value)},[_(m(t.value?"收起":"展开"),1),u("i",{class:y(["icon_expand_arrow",t.value?"rot":""])},null,2)])]),ea],512),[[f,void 0===a.data]])])}}});na.__scopeId="data-v-5b44103e",b("data-v-0c6d199a");const ia={class:"recommend-albums"},ca=["src"],oa={class:"msg"},da={class:"name td_u t_ovl1"},ra={class:"creator t_ovl1"},ua=_(" by "),va={class:"td_u"};h();var ma=n({props:{list:{type:Array,required:!0}},setup:a=>(s,t)=>{const l=c("loading");return r((o(),d("div",ia,[(o(!0),d(P,null,C(a.list,(a=>(o(),d("div",{class:"item fsc",key:a.id},[u("img",{src:a.coverImgUrl+"?param=50y50",alt:""},null,8,ca),u("div",oa,[u("div",da,m(a.name),1),u("div",ra,[ua,u("span",va,m(a.creator.nickname),1)])])])))),128))],512)),[[l,0===a.list.length]])}});ma.__scopeId="data-v-0c6d199a",b("data-v-4dbe060c");const pa={class:"recommend-songs"},ga={class:"left fd_col"},_a=["onClick"],ya=["innerHTML"],ba=u("div",{class:"right fpbc"},[u("i",{class:"icon_song_play"}),u("i",{class:"icon_song_add"})],-1);h();var fa=n({props:{list:{type:Array,required:!0}},setup(a){const s=w();console.log(s),s.beforeEach(((a,s,t)=>{const l=a.path===s.path&&"/song"===a.path,e=a.query.id===s.query.id;t(),!e&&l&&setTimeout((()=>location.reload()),0)}));const t=a=>{const s=a.artists.length;return a.artists.reduce(((a,t,l)=>1===s?`<span class="td_u cur_p" style="font-size:12px;">${t.name}</span>`:0===l?a+`<span class="td_u cur_p" style="font-size:12px;">${t.name}</span>`:a+` / <span class="td_u cur_p" style="font-size:12px;">${t.name}</span>`),"")};return(l,e)=>{const n=c("loading");return r((o(),d("div",pa,[(o(!0),d(P,null,C(a.list,(a=>(o(),d("div",{class:"item fpbc",key:a.id},[u("div",ga,[u("span",{class:"name d_ib t_ovl1 td_u",onClick:t=>k(s).push("/song?id="+a.id)},m(a.name),9,_a),u("span",{class:"artists d_ib t_ovl1",innerHTML:t(a)},null,8,ya)]),ba])))),128))],512)),[[n,0===a.list.length]])}}});fa.__scopeId="data-v-4dbe060c",b("data-v-72953ea4");const ha={class:"song-page fss"},Pa={class:"left d_ib"},Ca={class:"comments"},wa={key:0,class:"title-hot-comments"},ka={class:"title-new-comments"},xa={class:"right d_ib"},Ia={key:0,class:"recommend-albums"},ja=u("div",{class:"title"},"包含这首歌的歌单",-1),Sa={class:"list"},Ea={key:1,class:"recommend-songs"},qa=u("div",{class:"title"},"相似歌曲",-1),za={class:"list"};h();var Aa=n({setup(n){var c;const r=null==(c=w().currentRoute.value.query.id)?void 0:c.toString(),g=i({detail:void 0,lyric:void 0,hotComments:[],newComments:[],total:0,currentPage:1,endPage:1,comment:"",simiPlaylists:[],simiSongs:[],simiSongsIsEmpty:!1,simiPlaylistsIsEmpty:!1}),_=async(a=1)=>{if(!r)return;g.value.newComments=[];let s=await t(parseInt(r),a);0===g.value.hotComments.length&&(g.value.hotComments=s.hotComments),g.value.newComments=s.comments,g.value.total=s.total,g.value.endPage=Math.ceil(g.value.total/20)};x((()=>{(async()=>{r&&(g.value.detail=(await a(parseInt(r))).songs[0],console.log(g.value))})(),(async()=>{r&&(g.value.lyric=(await s(parseInt(r))).lrc.lyric)})(),_(),(async()=>{r&&(g.value.simiPlaylists=(await l(r)).playlists,0===g.value.simiPlaylists.length&&(g.value.simiPlaylistsIsEmpty=!0))})(),(async()=>{r&&(g.value.simiSongs=(await e(r)).songs,0===g.value.simiSongs.length&&(g.value.simiSongsIsEmpty=!0))})()}));const y=(a,s)=>{const t=g.value.currentPage;({page:()=>"page"===a&&s?g.value.currentPage=s:null,prev:()=>g.value.currentPage=1===t||2===t?1:t-1,next:()=>g.value.currentPage=t===g.value.total||t+1===g.value.total?g.value.total:t+1})[a]()};return I((()=>g.value.currentPage),(()=>_(g.value.currentPage))),(a,s)=>{var t,l;return o(),d("div",ha,[u("div",Pa,[p(na,{data:g.value.detail,lyric:g.value.lyric,commentCount:g.value.total},null,8,["data","lyric","commentCount"]),u("div",Ca,[p(E,{commentCount:g.value.total,commentContent:g.value.comment},null,8,["commentCount","commentContent"]),0!==(null==(t=g.value.hotComments)?void 0:t.length)?(o(),d("div",wa," 精彩评论 ")):v("",!0),0!==(null==(l=g.value.hotComments)?void 0:l.length)?(o(),j(q,{key:1,comments:g.value.hotComments,showBeReplied:!1},null,8,["comments"])):v("",!0),u("div",ka,"最新评论("+m(g.value.total)+")",1),p(q,{comments:g.value.newComments},null,8,["comments"]),p(z,{endPage:g.value.endPage,currentPage:g.value.currentPage,click:y},null,8,["endPage","currentPage"])])]),u("div",xa,[g.value.simiPlaylistsIsEmpty?v("",!0):(o(),d("div",Ia,[ja,u("div",Sa,[p(ma,{list:g.value.simiPlaylists},null,8,["list"])])])),g.value.simiSongsIsEmpty?v("",!0):(o(),d("div",Ea,[qa,u("div",za,[p(fa,{list:g.value.simiSongs},null,8,["list"])])])),p(A)])])}}});Aa.__scopeId="data-v-72953ea4";export{Aa as default};
